<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/>
  <title>ESV Verse Memorizer - Mobile Friendly</title>
  
  <meta name="theme-color" content="#3b82f6"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  
  <style>
    :root {
      --primary: #3b82f6;
      --primary-dark: #2563eb;
      --success: #16a34a;
      --warning: #ca8a04;
      --gray: #6b7280;
      --light-bg: #f8fafc;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(to bottom, #f0f7ff, #e0eaff);
      color: #1e293b;
      -webkit-overflow-scrolling: touch;
    }

    body {
      min-height: 100vh;
      padding: clamp(12px, 4vw, 20px);
      line-height: 1.5;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: clamp(1rem, 5vw, 2rem);
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    }

    h1 {
      font-size: clamp(1.6rem, 6vw, 2.2rem);
      color: var(--primary);
      text-align: center;
      margin-bottom: 0.6em;
    }

    .progress {
      text-align: center;
      color: #64748b;
      font-size: clamp(0.95rem, 3.5vw, 1.1rem);
      margin-bottom: 1.5rem;
    }

    .phase {
      background: var(--light-bg);
      padding: clamp(1rem, 4vw, 1.6rem);
      border-radius: 12px;
      margin: 1.5rem 0;
      border: 1px solid #e2e8f0;
    }

    .reference {
      font-weight: bold;
      color: var(--primary);
      font-size: clamp(1.2rem, 4.5vw, 1.35rem);
      margin-bottom: 0.8rem;
      display: block;
    }

    .verse {
      font-size: clamp(1.05rem, 4vw, 1.25rem);
      line-height: 1.7;
      white-space: pre-wrap;
      word-break: break-word;
    }

    textarea {
      width: 100%;
      min-height: 140px;
      padding: 1rem;
      font-size: clamp(1rem, 3.8vw, 1.15rem);
      line-height: 1.6;
      border: 2px solid #cbd5e1;
      border-radius: 10px;
      font-family: inherit;
      margin-top: 0.8rem;
      resize: vertical;
      -webkit-appearance: none;
    }

    textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      justify-content: center;
      margin: 1.8rem 0;
    }

    button {
      padding: clamp(0.8rem, 3.5vw, 1rem) clamp(1.2rem, 5vw, 1.8rem);
      font-size: clamp(1rem, 4vw, 1.1rem);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.15s;
      min-width: 130px;
      touch-action: manipulation;
    }

    .btn-start   { background: var(--primary); color: white; }
    .btn-submit  { background: var(--success); color: white; }
    .btn-retry   { background: var(--warning); color: white; }
    .btn-change  { background: var(--gray); color: white; }

    button:active {
      transform: scale(0.98);
    }

    .result {
      padding: clamp(1.2rem, 4vw, 1.6rem);
      border-radius: 12px;
      background: #fefce8;
      border: 1px solid #fef08a;
      text-align: center;
    }

    .accuracy-big {
      font-size: clamp(2.4rem, 10vw, 3.2rem);
      font-weight: bold;
      margin: 0.3em 0 0.2em;
      color: var(--success);
    }

    .hidden { display: none !important; }
  </style>
</head>
<body>

<div class="container">
  <h1>ESV Verse Memorizer</h1>
  <div class="progress" id="progress">Verse 1/30 ‚Ä¢ Attempt 1</div>

  <div id="readPhase" class="phase">
    <span class="reference" id="refRead"></span>
    <div class="verse" id="verseRead"></div>
  </div>

  <div id="typePhase" class="phase hidden">
    <strong>Type from memory:</strong>
    <textarea id="input" placeholder="Start typing here..." autocomplete="off" autocorrect="off" spellcheck="false"></textarea>
  </div>

  <div id="resultPhase" class="phase hidden">
    <div class="result" id="resultContent"></div>
  </div>

  <div class="controls">
    <button id="mainBtn" class="btn-start">Start</button>
    <button id="changeVerseBtn" class="btn-change">Change Verse</button>
  </div>
</div>

<script>
  // Expanded list of 30 popular ESV verses for memorization
  const verses = [
    { ref: "John 3:16", text: "For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life." },
    { ref: "Psalm 23:1", text: "The LORD is my shepherd; I shall not want." },
    { ref: "Philippians 4:13", text: "I can do all things through him who strengthens me." },
    { ref: "Romans 8:28", text: "And we know that for those who love God all things work together for good, for those who are called according to his purpose." },
    { ref: "Jeremiah 29:11", text: "For I know the plans I have for you, declares the LORD, plans for welfare and not for evil, to give you a future and a hope." },
    { ref: "Proverbs 3:5-6", text: "Trust in the LORD with all your heart, and do not lean on your own understanding. In all your ways acknowledge him, and he will make straight your paths." },
    { ref: "Isaiah 40:31", text: "But they who wait for the LORD shall renew their strength; they shall mount up with wings like eagles; they shall run and not be weary; they shall walk and not faint." },
    { ref: "Ephesians 2:8-9", text: "For by grace you have been saved through faith. And this is not your own doing; it is the gift of God, not a result of works, so that no one may boast." },
    { ref: "Matthew 6:33", text: "But seek first the kingdom of God and his righteousness, and all these things will be added to you." },
    { ref: "Psalm 46:10", text: "Be still, and know that I am God. I will be exalted among the nations, I will be exalted in the earth!" },
    { ref: "Joshua 1:9", text: "Have I not commanded you? Be strong and courageous. Do not be frightened, and do not be dismayed, for the LORD your God is with you wherever you go." },
    { ref: "Romans 12:2", text: "Do not be conformed to this world, but be transformed by the renewal of your mind, that by testing you may discern what is the will of God, what is good and acceptable and perfect." },
    { ref: "1 Corinthians 13:4-7", text: "Love is patient and kind; love does not envy or boast; it is not arrogant or rude. It does not insist on its own way; it is not irritable or resentful; it does not rejoice at wrongdoing, but rejoices with the truth. Love bears all things, believes all things, hopes all things, endures all things." },
    { ref: "Psalm 119:105", text: "Your word is a lamp to my feet and a light to my path." },
    { ref: "Galatians 5:22-23", text: "But the fruit of the Spirit is love, joy, peace, patience, kindness, goodness, faithfulness, gentleness, self-control; against such things there is no law." },
    { ref: "John 14:6", text: "Jesus said to him, ‚ÄúI am the way, and the truth, and the life. No one comes to the Father except through me.‚Äù" },
    { ref: "Hebrews 11:1", text: "Now faith is the assurance of things hoped for, the conviction of things not seen." },
    { ref: "2 Timothy 3:16", text: "All Scripture is breathed out by God and profitable for teaching, for reproof, for correction, and for training in righteousness." },
    { ref: "Psalm 37:4", text: "Delight yourself in the LORD, and he will give you the desires of your heart." },
    { ref: "Isaiah 41:10", text: "Fear not, for I am with you; be not dismayed, for I am your God; I will strengthen you, I will help you, I will uphold you with my righteous right hand." },
    { ref: "Matthew 11:28", text: "Come to me, all who labor and are heavy laden, and I will give you rest." },
    { ref: "Romans 6:23", text: "For the wages of sin is death, but the free gift of God is eternal life in Christ Jesus our Lord." },
    { ref: "Philippians 4:6-7", text: "Do not be anxious about anything, but in everything by prayer and supplication with thanksgiving let your requests be made known to God. And the peace of God, which surpasses all understanding, will guard your hearts and your minds in Christ Jesus." },
    { ref: "John 10:10", text: "The thief comes only to steal and kill and destroy. I came that they may have life and have it abundantly." },
    { ref: "Psalm 139:14", text: "I praise you, for I am fearfully and wonderfully made. Wonderful are your works; my soul knows it very well." },
    { ref: "Ephesians 6:12", text: "For we do not wrestle against flesh and blood, but against the rulers, against the authorities, against the cosmic powers over this present darkness, against the spiritual forces of evil in the heavenly places." },
    { ref: "James 1:5", text: "If any of you lacks wisdom, let him ask God, who gives generously to all without reproach, and it will be given him." },
    { ref: "1 Thessalonians 5:16-18", text: "Rejoice always, pray without ceasing, give thanks in all circumstances; for this is the will of God in Christ Jesus for you." },
    { ref: "Colossians 3:23", text: "Whatever you do, work heartily, as for the Lord and not for men." },
    { ref: "Hebrews 13:8", text: "Jesus Christ is the same yesterday and today and forever." }
  ];

  let currentVerseIndex = 0;
  let currentAttempt = 1;
  let currentVerse = null;

  const progressEl = document.getElementById('progress');
  const refReadEl = document.getElementById('refRead');
  const verseReadEl = document.getElementById('verseRead');
  const readPhase = document.getElementById('readPhase');
  const typePhase = document.getElementById('typePhase');
  const resultPhase = document.getElementById('resultPhase');
  const inputEl = document.getElementById('input');
  const resultContentEl = document.getElementById('resultContent');
  const mainBtn = document.getElementById('mainBtn');
  const changeVerseBtn = document.getElementById('changeVerseBtn');

  function loadNewVerse() {
    currentVerse = verses[currentVerseIndex];
    refReadEl.textContent = currentVerse.ref;
    verseReadEl.textContent = currentVerse.text;
    progressEl.textContent = `Verse ${currentVerseIndex + 1}/${verses.length} ‚Ä¢ Attempt ${currentAttempt}`;
    
    // Reset phases
    readPhase.classList.remove('hidden');
    typePhase.classList.add('hidden');
    resultPhase.classList.add('hidden');
    inputEl.value = '';
    mainBtn.textContent = 'Next';
    mainBtn.className = 'btn-submit';
  }

  function startMemorization() {
    readPhase.classList.add('hidden');
    typePhase.classList.remove('hidden');
    resultPhase.classList.add('hidden');
    inputEl.focus();
    mainBtn.textContent = 'Check';
    mainBtn.className = 'btn-submit';
  }

  function normalize(str) {
    return str.toLowerCase()
              .replace(/[.,;:!?"'()‚Äî‚Äì-]/g, '')  // remove punctuation
              .replace(/\s+/g, ' ')             // multiple spaces ‚Üí one
              .trim();
  }

  function checkVerse() {
    const userText = normalize(inputEl.value);
    const originalText = normalize(currentVerse.text);

    const userWords = userText.split(' ');
    const originalWords = originalText.split(' ');
    
    let correct = 0;
    for (let i = 0; i < Math.min(userWords.length, originalWords.length); i++) {
      if (userWords[i] === originalWords[i]) correct++;
    }

    const accuracy = originalWords.length === 0 ? 0 : Math.round((correct / originalWords.length) * 100);

    let message = `<div class="accuracy-big">${accuracy}%</div>`;
    if (accuracy === 100) {
      message += `<p>Perfect! üéâ Well done!</p>`;
    } else if (accuracy >= 80) {
      message += `<p>Great job! Almost there.</p>`;
    } else {
      message += `<p>Keep practicing!</p>`;
    }
    message += `<p><strong>Reference:</strong> ${currentVerse.ref}<br><em>${currentVerse.text}</em></p>`;

    resultContentEl.innerHTML = message;

    typePhase.classList.add('hidden');
    resultPhase.classList.remove('hidden');
    mainBtn.textContent = 'Retry';
    mainBtn.className = 'btn-retry';
  }

  function retryOrNext() {
    if (mainBtn.textContent === 'Retry') {
      currentAttempt++;
      loadNewVerse();  // same verse, new attempt
    }
  }

  // Button handlers
  mainBtn.addEventListener('click', () => {
    if (mainBtn.textContent === 'Start') {
      loadNewVerse();
    } else if (mainBtn.textContent === 'Next') {
      startMemorization();
    } else if (mainBtn.textContent === 'Check') {
      checkVerse();
    } else if (mainBtn.textContent === 'Retry') {
      retryOrNext();
    }
  });

  changeVerseBtn.addEventListener('click', () => {
    currentVerseIndex = (currentVerseIndex + 1) % verses.length;
    currentAttempt = 1;
    loadNewVerse();
    mainBtn.textContent = 'Next';
    mainBtn.className = 'btn-submit';
  });

  // Initial state: show Start button, hide verse
  readPhase.classList.add('hidden');
  mainBtn.textContent = 'Start';
  mainBtn.className = 'btn-start';
</script>

</body>
</html>